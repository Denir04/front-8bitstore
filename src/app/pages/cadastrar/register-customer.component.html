<div class="container">
  <h1 class="mb-4">Cadastrar Cliente</h1>
  <div class="painel" *ngIf="!loading && !success && !error; else other">
    <form class="row g-3" [formGroup]="customerForm">
      <h4>Dados Pessoias</h4>
      <hr />
      <div class="col-md-6">
        <label class="form-label">Nome Completo</label>
        <input
          type="text"
          class="form-control"
          formControlName="nome_completo"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.nome_completo
          "
        >
          {{errorMsgs?.nome_completo}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Data Nascimento</label>
        <input
          type="date"
          class="form-control"
          formControlName="data_nascimento"
        />
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.data_nascimento
          "
        >
          {{errorMsgs?.data_nascimento}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Telefone</label>
        <input
          type="text"
          class="form-control"
          formControlName="telefone"
          mask="(00) 000000000"
        />
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.telefone
          "
        >
          {{errorMsgs?.telefone}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">CPF</label>
        <input
          type="text"
          class="form-control"
          formControlName="cpf"
          inputmode="numeric"
          mask="000.000.000-00"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.cpf"
        >
          {{errorMsgs?.cpf}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Genêro</label>
        <select class="form-select" formControlName="genero">
          <option selected disabled value="">Escolha...</option>
          <option value="M">Masculino</option>
          <option value="F">Feminino</option>
          <option value="O">Outro</option>
        </select>
        <small
          class="text-danger"
          *ngIf="errorMsgs?.genero"
        >
          {{errorMsgs?.genero}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Email</label>
        <div class="input-group">
          <span class="input-group-text">{{ "@" }}</span>
          <input type="text" class="form-control" formControlName="email" />
        </div>
        <small
          class="text-danger"
          *ngIf="errorMsgs?.email"
        >
          {{errorMsgs?.email}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Senha</label>
        <input type="password" class="form-control" formControlName="senha" />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.senha"
        >
          {{errorMsgs?.senha}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Confirme Senha</label>
        <input
          type="password"
          class="form-control"
          formControlName="senha_novamente"
        />
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.senha_novamente
          "
        >
          {{errorMsgs?.senha_novamente}}
        </small>
      </div>
    </form>
    <form class="row g-3 mt-3" [formGroup]="addressForm">
      <h4>Endereço Residencial</h4>
      <hr />
      <div class="row mt-3">
        <div class="col-md-4">
          <label class="form-label">Apelido</label>
          <input
            type="text"
            class="form-control"
            formControlName="apelido"
            [mask]="'S*'"
            [patterns]="customPatterns"
          />
          <small
            class="text-danger"
            *ngIf="
              errorMsgs?.['endereco_residencial.apelido']
            "
          >
            {{errorMsgs?.['endereco_residencial.apelido']}}
          </small>
        </div>
      </div>
      <div class="col-md-2">
        <label class="form-label">Tipo Residencia</label>
        <select class="form-select" formControlName="tipo_residencia">
          <option selected disabled value="">Escolha...</option>
          <option value="CASA">Casa</option>
          <option value="APARTAMENTO">Apartamento</option>
          <option value="CONDOMINIO">Condominio</option>
        </select>
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.['endereco_residencial.tipo_residencia']
          "
        >
          {{errorMsgs?.['endereco_residencial.tipo_residencia']}}
        </small>
      </div>
      <div class="col-md-2">
        <label class="form-label">Tipo Logradouro</label>
        <select class="form-select" formControlName="tipo_logradouro">
          <option selected disabled value="">Escolha...</option>
          <option value="RUA">Rua</option>
          <option value="AVENIDA">Avenida</option>
          <option value="RODOVIA">Praça</option>
          <option value="JARDIM">Praça</option>
        </select>
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.['endereco_residencial.tipo_logradouro']
          "
        >
          {{errorMsgs?.['endereco_residencial.tipo_logradouro']}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Logradouro</label>
        <input
          type="text"
          class="form-control"
          formControlName="logradouro"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
        <small
          class="text-danger"
          *ngIf="
            errorMsgs?.['endereco_residencial.logradouro']
          "
        >
          {{errorMsgs?.['endereco_residencial.logradouro']}}
        </small>
      </div>
      <div class="col-md-2">
        <label class="form-label">Número</label>
        <input
          type="text"
          class="form-control"
          mask="AAAAA"
          formControlName="numero"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.['endereco_residencial.numero']"
        >
          {{errorMsgs?.['endereco_residencial.numero']}}
        </small>
      </div>
      <div class="col-md-4">
        <label class="form-label">Bairro</label>
        <input
          type="text"
          class="form-control"
          formControlName="bairro"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.['endereco_residencial.bairro']"
        >
          {{errorMsgs?.['endereco_residencial.bairro']}}
        </small>
      </div>
      <div class="col-md-4">
        <label class="form-label">Cidade</label>
        <input
          type="text"
          class="form-control"
          formControlName="cidade"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.['endereco_residencial.cidade']"
        >
          {{errorMsgs?.['endereco_residencial.cidade']}}
        </small>
      </div>
      <div class="col-md-4">
        <label class="form-label">Estado</label>
        <input
          type="text"
          class="form-control"
          formControlName="estado"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.['endereco_residencial.estado']"
        >
          {{errorMsgs?.['endereco_residencial.estado']}}
        </small>
      </div>
      <div class="col-md-3">
        <label class="form-label">País</label>
        <input
          type="text"
          class="form-control"
          formControlName="pais"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.['endereco_residencial.pais']"
        >
          {{errorMsgs?.['endereco_residencial.pais']}}
        </small>
      </div>
      <div class="col-md-3">
        <label class="form-label">CEP</label>
        <input
          type="text"
          class="form-control"
          mask="00000-000"
          formControlName="cep"
        />
        <small
          class="text-danger"
          *ngIf="errorMsgs?.['endereco_residencial.cep']"
        >
          {{errorMsgs?.['endereco_residencial.cep']}}
        </small>
      </div>
      <div class="col-md-6">
        <label class="form-label">Observações</label>
        <input
          type="text"
          class="form-control"
          [mask]="'S*'"
          [patterns]="customPatterns"
        />
      </div>
      <div class="col-12 mt-4 d-flex justify-content-end">
        <button
          class="btn btn-primary btn-lg w-25"
          type="button"
          (click)="onSubmit()"
        >
          Cadastrar
        </button>
      </div>
    </form>
  </div>
  <ng-template #other class="painel">
    <div *ngIf="loading">
      <p>Carregando...</p>
    </div>
    <div *ngIf="success">
      <div class="painel text-center">
        <p class="mb-4">Operação realizada com sucesso!</p>
        <button
          class="btn btn-secondary btn-md"
          (click)="this.success = false; goHome()"
        >
          OK
        </button>
      </div>
    </div>
    <div *ngIf="error">
      <div class="painel text-center">
        <p class="mb-4">Houve um erro!</p>
        <button
          class="btn btn-secondary btn-md"
          (click)="this.error = false;"
        >
          OK
        </button>
      </div>
    </div>
  </ng-template>
</div>
